# ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ¾Ğ´Ğ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ALGORITHMIC ARTS

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.0  
**Ğ”Ğ°Ñ‚Ğ°:** Ğ¤ĞµĞ²Ñ€Ğ°Ğ»ÑŒ 2026  
**Ğ”Ğ»Ñ:** Qwen Code, Claude, GPT-4, Ğ¸Ğ»Ğ¸ Ğ»ÑĞ±Ğ°Ñ AI Ñ coding capabilities

---

## ğŸ“‹ ĞĞ³Ğ»Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ²

1. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–1: Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¸ Docker Compose](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-1-Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°)
2. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–2: Ğ‘Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-2-Ğ±Ğ°Ğ·Ñ‹-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
3. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–3: Auth + User Service](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-3-auth-user-service)
4. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–4: Company + Partner Service](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-4-company-partner-service)
5. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–5: AI Core + Multi-Agent System](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-5-ai-core)
6. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–6: Data Pipeline + Parsers](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-6-data-pipeline)
7. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–7: CRM Hub + Integrations](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-7-crm-hub)
8. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–8: Frontend Next.js 15](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-8-frontend)
9. [ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–9: DevOps + Kubernetes](#Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚-9-devops)

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–1: Ğ˜Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ±Ğ°Ğ·Ğ¾Ğ²ÑƒÑ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°: ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¹, Docker Compose, Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹.

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ´Ğ»Ñ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ½Ğ¾Ğ¹ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ALGORITHMIC ARTS.

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:

1. Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞŸĞ ĞĞ•ĞšĞ¢Ğ:
```
platform/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ api-gateway/
â”‚   â”œâ”€â”€ auth-service/
â”‚   â”œâ”€â”€ user-service/
â”‚   â”œâ”€â”€ company-service/
â”‚   â”œâ”€â”€ partner-service/
â”‚   â”œâ”€â”€ ai-core-service/
â”‚   â”œâ”€â”€ data-pipeline/
â”‚   â”œâ”€â”€ crm-hub/
â”‚   â”œâ”€â”€ search-service/
â”‚   â”œâ”€â”€ reporting/
â”‚   â”œâ”€â”€ billing/
â”‚   â””â”€â”€ notification/
â”œâ”€â”€ frontend/
â”œâ”€â”€ ai-agents/
â”œâ”€â”€ shared/
â”œâ”€â”€ infra/
â”œâ”€â”€ scripts/
â””â”€â”€ tests/
```

2. DOCKER COMPOSE (docker-compose.yml):
- PostgreSQL 17 (Ñ pgvector, pg_cron, Citus)
- Redis Stack 7.4
- Elasticsearch 8.14
- Apache Kafka 3.7 + Zookeeper
- MinIO (S3-compatible)
- Prometheus + Grafana
- Loki (Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
- Jaeger (Ñ‚Ñ€ĞµĞ¹ÑĞ¸Ğ½Ğ³)

3. Ğ¤ĞĞ™Ğ› .env.example ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸:
- ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ Ğº Ğ‘Ğ”
- API ĞºĞ»ÑÑ‡Ğ¸ (YandexGPT, GigaChat, OpenRouter)
- CRM Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ (amoCRM, Ğ‘Ğ¸Ñ‚Ñ€Ğ¸ĞºÑ24)
- JWT ÑĞµĞºÑ€ĞµÑ‚Ñ‹
- Email, Telegram
- ĞŸĞ»Ğ°Ñ‚Ñ‘Ğ¶Ğ½Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

4. Ğ‘ĞĞ—ĞĞ’Ğ«Ğ• ĞšĞĞĞ¤Ğ˜Ğ“Ğ£Ğ ĞĞ¦Ğ˜Ğ˜:
- pyproject.toml Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ° (Poetry)
- Dockerfile Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ° (multi-stage build)
- .gitignore
- .dockerignore
- Makefile Ñ Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ñ‹Ğ¼Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°Ğ¼Ğ¸

5. Ğ¡ĞšĞ Ğ˜ĞŸĞ¢Ğ«:
- scripts/generate_secrets.py (Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ JWT, Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹)
- scripts/check_dependencies.sh (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²ĞµÑ€ÑĞ¸Ğ¹)
- scripts/init_project.sh (Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ°Ñ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)

Ğ¢Ğ•Ğ¥ĞĞĞ›ĞĞ“Ğ˜Ğ˜:
- Python 3.12
- FastAPI 0.115+
- PostgreSQL 17
- Redis Stack 7.4
- Node.js 22
- Next.js 15

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Dockerfile Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ production-ready Ñ multi-stage builds.
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–2: Ğ‘Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑÑ…ĞµĞ¼Ñ‹ Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…, Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Alembic Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ².

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ ÑÑ…ĞµĞ¼Ñ‹ PostgreSQL Ğ±Ğ°Ğ· Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ALGORITHMIC ARTS.

Ğ¢Ğ Ğ•Ğ‘Ğ£Ğ•ĞœĞ«Ğ• Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ«:

1. AUTH DATABASE:
- users (id UUID, email, password_hash bcrypt, full_name, company_name, role, is_active, 2FA)
- sessions (id, user_id, token, expires_at)
- oauth_connections (id, user_id, provider, external_id)
- permissions (id, name, description)
- roles (id, name, permissions[])
- user_roles (user_id, role_id)

2. COMPANY DATABASE:
- companies (id UUID, name, slug, description, website, logo_url, industry, sub_industries[], business_model, founded_year, headquarters_country, headquarters_city, employees_count, employees_range, funding_total, funding_stage, last_funding_date, inn, ogrn, kpp, legal_name, tech_stack JSONB, integrations[], api_available, ai_summary, ai_tags[], embedding VECTOR(1536), is_verified, view_count, created_at, updated_at, deleted_at)
- company_updates (id, company_id, update_type, title, content, source_url, published_at)
- company_metrics (id, company_id, metric_name, metric_value, measured_at)

3. PARTNERSHIP DATABASE:
- partnerships (id, company_a_id, company_b_id, compatibility_score NUMERIC(3,2), match_reasons[], synergy_areas[], analysis_method, analyzed_by_agent, ai_explanation, status, contacted_at, partnership_started_at, deal_value, revenue_generated)
- outreach_messages (id, partnership_id, message_text, sent_at, response_received, response_text)

4. CRM DATABASE:
- crm_connections (id, user_id, crm_type ENUM('amocrm', 'bitrix24', 'salesforce'), access_token, refresh_token, expires_at, account_subdomain)
- crm_sync_logs (id, connection_id, direction ENUM('to_crm', 'from_crm'), entity_type, entity_id, status, error_message, synced_at)

5. BILLING DATABASE:
- subscriptions (id, user_id, plan ENUM('starter', 'growth', 'scale', 'enterprise'), status ENUM('active', 'cancelled', 'past_due'), current_period_start, current_period_end, cancel_at_period_end)
- payments (id, subscription_id, amount, currency DEFAULT 'RUB', status, payment_method, external_payment_id, paid_at)

Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- Ğ’ÑĞµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ‹ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ¸Ğ¼ĞµÑ‚ÑŒ created_at, updated_at (Ñ Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€Ğ°Ğ¼Ğ¸)
- Ğ˜Ğ½Ğ´ĞµĞºÑÑ‹ Ğ½Ğ° Ğ²ÑĞµ foreign keys
- VECTOR Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ pgvector (IVFFlat)
- GIN Ğ¸Ğ½Ğ´ĞµĞºÑÑ‹ Ğ´Ğ»Ñ JSONB Ğ¸ Ğ¼Ğ°ÑÑĞ¸Ğ²Ñ‹
- ĞŸĞ°Ñ€Ñ‚Ğ¸Ñ†Ğ¸Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ† (company_updates, company_metrics Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğµ)
- Soft delete (deleted_at IS NULL)

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹:
1. SQL ÑÑ…ĞµĞ¼Ñ‹ Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†
2. ĞœĞ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Alembic Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ ÑĞµÑ€Ğ²Ğ¸ÑĞ° (services/*/alembic/versions/)
3. SQLAlchemy Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ (services/*/src/models.py)
4. Seed Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (100 ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹, 50 Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–3: Auth + User Service

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½ÑƒÑ Ğ°ÑƒÑ‚ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ Ğ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼Ğ¸.

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ Auth Ğ¸ User Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ALGORITHMIC ARTS.

AUTH-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8001):

1. Ğ­ĞĞ”ĞŸĞĞ˜ĞĞ¢Ğ«:
POST   /auth/register           # Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ email verification
POST   /auth/login              # Ğ’Ñ…Ğ¾Ğ´ (email/password)
POST   /auth/logout             # Ğ’Ñ‹Ñ…Ğ¾Ğ´
POST   /auth/refresh            # Refresh Ñ‚Ğ¾ĞºĞµĞ½Ğ°
POST   /auth/oauth/{provider}   # OAuth2 (Ğ¯Ğ½Ğ´ĞµĞºÑ, Google, VK)
POST   /auth/2fa/setup          # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° 2FA (TOTP)
POST   /auth/2fa/verify         # Ğ’ĞµÑ€Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ 2FA
POST   /auth/password/reset     # Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ ÑĞ±Ñ€Ğ¾ÑĞ° Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ
POST   /auth/password/confirm   # ĞŸĞ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ñ
GET    /auth/me                 # Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ

2. JWT IMPLEMENTATION:
- Access token (15 Ğ¼Ğ¸Ğ½)
- Refresh token (30 Ğ´Ğ½ĞµĞ¹)
- RS256 Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑÑŒ (private/public keys)
- Ğ Ğ¾Ñ‚Ğ°Ñ†Ğ¸Ñ ĞºĞ»ÑÑ‡ĞµĞ¹
- Blacklist Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ² Ğ² Redis

3. Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬:
- Bcrypt Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»ĞµĞ¹ (cost 12)
- Rate limiting (5 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚Ğ¾Ğº / 5 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
- Email verification Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ĞµĞ½
- 2FA Ğ¾Ğ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ĞµĞ½ (TOTP Ñ‡ĞµÑ€ĞµĞ· pyotp)
- CSRF Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
- Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ timing attacks

USER-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8002):

1. Ğ­ĞĞ”ĞŸĞĞ˜ĞĞ¢Ğ«:
GET    /users/me                    # ĞŸÑ€Ğ¾Ñ„Ğ¸Ğ»ÑŒ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
PUT    /users/me                    # ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ñ
GET    /users/{user_id}             # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
PUT    /users/{user_id}             # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ (Ğ°Ğ´Ğ¼Ğ¸Ğ½)
DELETE /users/{user_id}             # Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ (soft delete)
POST   /users/{user_id}/preferences # ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹
GET    /users/{user_id}/activity    # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚Ğ¸
POST   /users/team                  # ĞŸÑ€Ğ¸Ğ³Ğ»Ğ°ÑĞ¸Ñ‚ÑŒ Ğ² ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ
DELETE /users/team/{member_id}      # Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ Ğ¸Ğ· ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

2. RBAC IMPLEMENTATION:
- Ğ Ğ¾Ğ»Ğ¸: free_user, paid_user, company_admin, platform_admin
- Permissions: company:read, company:write, etc.
- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ°Ğ² Ğ² dependencies
- ABAC Ğ´Ğ»Ñ Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸

3. Ğ˜ĞĞ¢Ğ•Ğ“Ğ ĞĞ¦Ğ˜Ğ˜:
- Kafka events (user.created, user.updated)
- Redis ĞºÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»ĞµĞ¹ (TTL 1 Ñ‡Ğ°Ñ)
- Elasticsearch Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

ĞĞ‘Ğ©Ğ˜Ğ• Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- FastAPI Ñ async/await
- Pydantic Ğ´Ğ»Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸
- SQLAlchemy 2.0 (async)
- Alembic Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
- 90%+ test coverage
- OpenAPI Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
- Structured logging (structlog)
- Health checks (/health)
- Metrics (Prometheus)

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ğ¾Ğ¸Ñ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ² ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸.
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–4: Company + Partner Service

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ CRUD ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ğ¿Ğ¾Ğ´Ğ±Ğ¾Ñ€Ğ° Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ².

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Company Service Ğ¸ Partner Service Ğ´Ğ»Ñ ALGORITHMIC ARTS.

COMPANY-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8003):

1. Ğ­ĞĞ”ĞŸĞĞ˜ĞĞ¢Ğ«:
GET    /companies                   # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ñ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹
GET    /companies/{company_id}      # Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
POST   /companies                   # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ (Ğ°Ğ´Ğ¼Ğ¸Ğ½)
PUT    /companies/{company_id}      # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ
DELETE /companies/{company_id}      # Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ÑŒ (soft delete)
GET    /companies/search            # ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
GET    /companies/{id}/similar      # ĞŸĞ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ (vector search)
POST   /companies/{id}/enrich       # Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ AI Ğ¾Ğ±Ğ¾Ğ³Ğ°Ñ‰ĞµĞ½Ğ¸Ğµ
GET    /companies/{id}/history      # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
POST   /companies/batch             # ĞŸĞ°ĞºĞµÑ‚Ğ½Ğ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ

2. Ğ¤Ğ˜Ğ›Ğ¬Ğ¢Ğ ĞĞ¦Ğ˜Ğ¯:
- ĞŸĞ¾ Ğ¸Ğ½Ğ´ÑƒÑÑ‚Ñ€Ğ¸Ğ¸, Ñ€ĞµĞ³Ğ¸Ğ¾Ğ½Ñƒ, Ñ€Ğ°Ğ·Ğ¼ĞµÑ€Ñƒ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
- ĞŸĞ¾ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸ÑĞ¼ (tech_stack)
- ĞŸĞ¾ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ñ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- ĞŸĞ¾ Ğ´Ğ°Ñ‚Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- ĞšĞ¾Ğ¼Ğ±Ğ¸Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ñ„Ğ¸Ğ»ÑŒÑ‚Ñ€Ñ‹

3. VECTOR SEARCH:
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· Sentence Transformers
- Ğ¥Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² pgvector
- Similarity search (cosine distance)
- Hybrid search (full-text + vector)

4. EVENT SOURCING:
- Ğ’ÑĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ ĞºĞ°Ğº ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ
- Kafka topics: company.created, company.updated
- Event store Ğ² PostgreSQL
- Snapshots ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 100 ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

PARTNER-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8004):

1. Ğ­ĞĞ”ĞŸĞĞ˜ĞĞ¢Ğ«:
GET    /partnerships                      # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²
GET    /partnerships/{partnership_id}     # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸
POST   /partnerships/analyze              # ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
POST   /partnerships/{id}/contact         # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ outreach
PUT    /partnerships/{id}/status          # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ÑÑ‚Ğ°Ñ‚ÑƒÑ
GET    /partnerships/recommendations      # Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
GET    /partnerships/stats                # Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ°

2. COMPATIBILITY ALGORITHM:
```python
def calculate_compatibility(company_a, company_b):
    scores = {
        'tech_compatibility': check_tech_stack_overlap(),
        'market_overlap': check_target_market(),
        'size_match': check_company_size_compatibility(),
        'geo_proximity': check_geographical_match(),
        'no_competition': check_not_direct_competitors(),
        'complementarity': check_feature_complementarity()
    }
    
    # Ğ’Ğ·Ğ²ĞµÑˆĞµĞ½Ğ½Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ°
    weights = [0.25, 0.20, 0.15, 0.10, 0.15, 0.15]
    final_score = sum(s * w for s, w in zip(scores.values(), weights))
    
    return final_score
```

3. REAL-TIME MATCHING:
- Kafka consumer Ğ´Ğ»Ñ company.created
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ²
- AI Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· Ñ‡ĞµÑ€ĞµĞ· ai-core-service (gRPC)
- Ğ£Ğ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ score > 0.7

4. REPORTING:
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ PDF Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ğ¾Ğ² (WeasyPrint)
- Excel ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚Ñ‹ (openpyxl)
- Ğ“Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ (Plotly)

ĞĞ‘Ğ©Ğ˜Ğ• Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- CQRS pattern (ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ vs Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹)
- Repository pattern
- Domain-Driven Design
- Event-Driven Architecture
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Redis (read-through)
- Pagination (cursor-based)
- Rate limiting
- Monitoring

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ ÑĞ»Ğ¾ÑĞ¼Ğ¸ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ (domain, application, infrastructure).
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–5: AI Core

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ AI Ğ´Ğ²Ğ¸Ğ¶Ğ¾Ğº Ñ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹.

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ AI Core Service Ñ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ¾Ğ¹ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ¾Ğ¹ Ğ´Ğ»Ñ ALGORITHMIC ARTS.

AI-CORE-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8005):

1. Ğ­ĞĞ”ĞŸĞĞ˜ĞĞ¢Ğ«:
POST   /ai/enrich/company           # ĞĞ±Ğ¾Ğ³Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
POST   /ai/find/similar             # ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
POST   /ai/analyze/compatibility    # ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸
POST   /ai/generate/summary         # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ³Ğ¾ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ
POST   /ai/generate/pitch           # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ pitch-Ğ¿Ğ¸ÑÑŒĞ¼Ğ°
POST   /ai/analyze/news             # ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
POST   /ai/rank/partners            # Ğ Ğ°Ğ½Ğ¶Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ²
POST   /ai/embedding/generate       # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ÑĞ¼Ğ±ĞµĞ´Ğ´Ğ¸Ğ½Ğ³Ğ°
POST   /ai/chat                     # Ğ§Ğ°Ñ‚ Ñ AI Ğ°ÑÑĞ¸ÑÑ‚ĞµĞ½Ñ‚Ğ¾Ğ¼
GET    /ai/models/available         # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ñ… Ğ¼Ğ¾Ğ´ĞµĞ»ĞµĞ¹

2. LLM ROUTER (Ñ Ñ„Ğ¾Ğ»Ğ±ÑĞºĞ¾Ğ¼):
```python
class LLMRouter:
    def __init__(self):
        self.providers = [
            YandexGPTProvider(priority=1),
            GigaChatProvider(priority=2),
            OpenRouterProvider(priority=3, models=['claude-sonnet-4', 'gpt-4o'])
        ]
    
    async def generate(self, prompt, max_retries=3):
        for provider in sorted(self.providers, key=lambda p: p.priority):
            try:
                response = await provider.generate(prompt)
                # Log ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ·Ğ¾Ğ²
                await log_llm_usage(provider.name, success=True)
                return response
            except Exception as e:
                # Log Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ¸ Ğ¿Ñ€Ğ¾Ğ±ÑƒĞµĞ¼ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹
                await log_llm_usage(provider.name, success=False, error=str(e))
                continue
        
        raise AllProvidersFailedError()
```

3. MULTI-AGENT SYSTEM (LangGraph):

**Agent 1: Partnership Scout**
- ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ VC.ru, Habr, LinkedIn
- ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ½Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
- Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€: ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚

**Agent 2: Compatibility Analyzer**
- ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚Ğ¾Ğ²
- Ğ’ĞµĞºÑ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº + LLM Ğ¾Ñ†ĞµĞ½ĞºĞ°
- Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€: Ğ½Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

**Agent 3: Outreach Writer**
- Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¸ÑÑŒĞ¼Ğ°
- Ğ¡Ñ‚Ğ¸Ğ»Ğ¸: Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹, Ğ´Ñ€ÑƒĞ¶ĞµÑĞºĞ¸Ğ¹, Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡Ğ½Ñ‹Ğ¹
- Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€: Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğ°Ğ¶Ğ¸Ğ¼Ğ°ĞµÑ‚ "Contact"

**Agent 4: Data Enricher**
- ĞĞ±Ğ¾Ğ³Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¿Ñ€Ğ¾Ñ„Ğ¸Ğ»Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹
- ĞŸĞ°Ñ€ÑĞ¸Ñ‚ ÑĞ°Ğ¹Ñ‚Ñ‹, ÑĞ¾Ñ†ÑĞµÑ‚Ğ¸, Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚Ğ¸
- Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€: Ğ½Ğ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ

**Agent 5: Analytics Predictor**
- ĞŸÑ€ĞµĞ´ÑĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ĞµÑ€Ğ¾ÑÑ‚Ğ½Ğ¾ÑÑ‚ÑŒ ÑĞ´ĞµĞ»ĞºĞ¸
- Gradient Boosting Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ
- Ğ¢Ñ€Ğ¸Ğ³Ğ³ĞµÑ€: Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²Ğ°

4. ORCHESTRATOR (LangGraph):
```python
from langgraph.graph import StateGraph, END

workflow = StateGraph(AgentState)

# Nodes
workflow.add_node("scout", scout_agent)
workflow.add_node("analyzer", analyzer_agent)
workflow.add_node("writer", writer_agent)
workflow.add_node("enricher", enricher_agent)

# Edges
workflow.add_edge("scout", "enricher")
workflow.add_edge("enricher", "analyzer")
workflow.add_conditional_edges(
    "analyzer",
    should_generate_outreach,
    {"yes": "writer", "no": END}
)

graph = workflow.compile()
```

5. EMBEDDINGS:
- Sentence Transformers (multilingual)
- ĞœĞ¾Ğ´ĞµĞ»ÑŒ: sentence-transformers/paraphrase-multilingual-mpnet-base-v2
- Ğ Ğ°Ğ·Ğ¼ĞµÑ€Ğ½Ğ¾ÑÑ‚ÑŒ: 768
- Batch processing
- ĞšÑÑˆĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ² Redis

6. RAG (Retrieval-Augmented Generation):
- Vector store: pgvector
- Retriever: Hybrid (dense + BM25)
- Re-ranker: Cross-encoder
- Context window: 8000 tokens

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- LangChain Ğ´Ğ»Ñ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸
- AsyncIO Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»Ğ¸Ğ·Ğ¼Ğ°
- Celery Ğ´Ğ»Ñ Ñ„Ğ¾Ğ½Ğ¾Ğ²Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡
- Prometheus Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ (Ğ²Ñ€ĞµĞ¼Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸, ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ)
- Graceful degradation Ğ¿Ñ€Ğ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ğ¾ÑÑ‚Ğ¸ LLM
- A/B Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ²

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ²ÑĞµÑ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ¸ Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°.
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–6: Data Pipeline

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ETL Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½ Ğ´Ğ»Ñ ÑĞ±Ğ¾Ñ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑÑ….

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Data Pipeline Service Ğ´Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğ³Ğ¾ ÑĞ±Ğ¾Ñ€Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾ Ñ€Ğ¾ÑÑĞ¸Ğ¹ÑĞºĞ¸Ñ… SaaS ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸ÑÑ….

DATA-PIPELINE-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8006):

1. Ğ˜Ğ¡Ğ¢ĞĞ§ĞĞ˜ĞšĞ˜ Ğ”ĞĞĞĞ«Ğ¥:

**A. VC.ru**
- RSS Ñ„Ğ¸Ğ´: https://vc.ru/rss
- ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ÑÑ‚Ğ°Ñ‚ĞµĞ¹ Ğ¾ ÑÑ‚Ğ°Ñ€Ñ‚Ğ°Ğ¿Ğ°Ñ…
- Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ: Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ, Ñ€Ğ°ÑƒĞ½Ğ´Ñ‹
- Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°: ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‡Ğ°Ñ

**B. Rusbase**
- API + Web scraping
- ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸ Ğ¾ Ğ¸Ğ½Ğ²ĞµÑÑ‚Ğ¸Ñ†Ğ¸ÑÑ…
- Ğ‘Ğ°Ğ·Ğ° ÑÑ‚Ğ°Ñ€Ñ‚Ğ°Ğ¿Ğ¾Ğ²
- Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°: ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 2 Ñ‡Ğ°ÑĞ°

**C. Habr ĞšĞ°Ñ€ÑŒĞµÑ€Ğ°**
- API Ğ²Ğ°ĞºĞ°Ğ½ÑĞ¸Ğ¹
- ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ ÑÑ‚ĞµĞºĞ° Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹
- Ğ Ğ°Ğ·Ğ¼ĞµÑ€ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹
- Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°: ĞµĞ¶ĞµĞ´Ğ½ĞµĞ²Ğ½Ğ¾

**D. Ğ•Ğ“Ğ Ğ®Ğ› (ĞšĞ¾Ğ½Ñ‚ÑƒÑ€.Ğ¤Ğ¾ĞºÑƒÑ)**
- API Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ¸ Ğ˜ĞĞ/ĞĞ“Ğ Ğ
- Ğ®Ñ€Ğ¸Ğ´Ğ¸Ñ‡ĞµÑĞºĞ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
- Ğ¤Ğ¸Ğ½Ğ°Ğ½ÑĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾ĞºĞ°Ğ·Ğ°Ñ‚ĞµĞ»Ğ¸
- Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°: Ğ¿Ñ€Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸

**E. Crunchbase (Ğ¼ĞµĞ¶Ğ´ÑƒĞ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğµ)**
- API Ğ´Ğ»Ñ Ğ³Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹
- Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¾ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸
- Ğ§Ğ°ÑÑ‚Ğ¾Ñ‚Ğ°: ĞµĞ¶ĞµĞ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¾

2. SCRAPERS (Scrapy):

```python
# scraper_vc_ru.py
class VCRuSpider(scrapy.Spider):
    name = 'vc_ru'
    
    def start_requests(self):
        yield scrapy.Request('https://vc.ru/rss', self.parse_rss)
    
    def parse_rss(self, response):
        # ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ RSS
        for item in response.xpath('//item'):
            article_url = item.xpath('link/text()').get()
            yield scrapy.Request(article_url, self.parse_article)
    
    def parse_article(self, response):
        # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¾ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
        company_data = {
            'name': extract_company_name(response),
            'description': extract_description(response),
            'funding_amount': extract_funding(response),
            'source_url': response.url
        }
        
        # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ² Kafka
        yield company_data
```

3. ETL PIPELINE:

**Extract:**
- Scrapy Ğ´Ğ»Ñ Ğ²ĞµĞ±-ÑĞºÑ€ĞµĞ¹Ğ¿Ğ¸Ğ½Ğ³Ğ°
- API ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ Ğ¾Ñ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²
- Ğ Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· Celery Beat

**Transform:**
- ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° HTML
- NER Ğ´Ğ»Ñ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ñ ÑÑƒÑ‰Ğ½Ğ¾ÑÑ‚ĞµĞ¹ (ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸, ÑÑƒĞ¼Ğ¼Ñ‹)
- Ğ”ĞµĞ´ÑƒĞ¿Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ñ (fuzzy matching Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğ¹)
- Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ (Pydantic ÑÑ…ĞµĞ¼Ñ‹)

**Load:**
- Kafka producer â†’ company.raw_data topic
- Batch insert Ğ² PostgreSQL
- ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Elasticsearch Ğ¸Ğ½Ğ´ĞµĞºÑĞ°

4. ĞĞĞ ĞœĞĞ›Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯:

```python
async def normalize_company_data(raw_data: dict) -> CompanyData:
    # 1. ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ
    name = clean_company_name(raw_data['name'])
    
    # 2. ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ÑÑƒĞ¼Ğ¼Ñ‹ Ñ„Ğ¸Ğ½Ğ°Ğ½ÑĞ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
    funding = parse_funding_amount(raw_data.get('funding_text'))
    
    # 3. ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½Ğ´ÑƒÑÑ‚Ñ€Ğ¸Ğ¸ (ML classifier)
    industry = classify_industry(raw_data['description'])
    
    # 4. Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ñ‚ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ğ¸Ğ¹
    tech_stack = extract_technologies(raw_data['description'])
    
    # 5. Ğ“ĞµĞ¾Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
    location = geocode_location(raw_data.get('location'))
    
    return CompanyData(
        name=name,
        funding_total=funding,
        industry=industry,
        tech_stack=tech_stack,
        headquarters_city=location
    )
```

5. Ğ”Ğ•Ğ”Ğ£ĞŸĞ›Ğ˜ĞšĞĞ¦Ğ˜Ğ¯:

```python
from fuzzywuzzy import fuzz

async def find_duplicates(new_company: CompanyData):
    # ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ñ… Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğ¹
    candidates = await db.query(
        "SELECT id, name FROM companies WHERE name ILIKE %s",
        f"%{new_company.name[:5]}%"
    )
    
    for candidate in candidates:
        # Similarity score
        score = fuzz.ratio(new_company.name.lower(), candidate.name.lower())
        
        if score > 85:
            # ĞŸĞ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚
            return candidate.id
    
    return None
```

6. Ğ ĞĞ¡ĞŸĞ˜Ğ¡ĞĞĞ˜Ğ• (Celery Beat):

```python
from celery import Celery
from celery.schedules import crontab

app = Celery('data_pipeline')

app.conf.beat_schedule = {
    'scrape-vc-ru': {
        'task': 'tasks.scrape_vc_ru',
        'schedule': crontab(minute=0, hour='*/1'),  # ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ñ‡Ğ°Ñ
    },
    'scrape-rusbase': {
        'task': 'tasks.scrape_rusbase',
        'schedule': crontab(minute=0, hour='*/2'),  # ĞšĞ°Ğ¶Ğ´Ñ‹Ğµ 2 Ñ‡Ğ°ÑĞ°
    },
    'update-egrul': {
        'task': 'tasks.update_egrul_data',
        'schedule': crontab(hour=3, minute=0),  # 3:00 AM daily
    },
}
```

7. ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“:
- ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¸ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸ĞºĞ¾Ğ²
- ĞĞ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ·Ğ° Ğ´ĞµĞ½ÑŒ
- ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ°
- Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡
- ĞĞ»ĞµÑ€Ñ‚Ñ‹ Ğ² Telegram Ğ¿Ñ€Ğ¸ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- Scrapy + Selenium (Ğ´Ğ»Ñ Ğ´Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… ÑĞ°Ğ¹Ñ‚Ğ¾Ğ²)
- Celery + Redis Ğ´Ğ»Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡
- Kafka Ğ´Ğ»Ñ event streaming
- PostgreSQL Ğ´Ğ»Ñ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ
- Anti-bot Ğ¼ĞµÑ€Ñ‹ (User-Agent rotation, delays)
- Retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° (3 Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºĞ¸ Ñ exponential backoff)

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğµ scrapers Ğ¸ ETL pipeline.
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–7: CRM Hub

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑƒĞ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ…Ğ°Ğ± Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ñ€Ğ¾ÑÑĞ¸Ğ¹ÑĞºĞ¸Ğ¼Ğ¸ Ğ¸ Ğ¼ĞµĞ¶Ğ´ÑƒĞ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğ¼Ğ¸ CRM.

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ CRM Hub Service Ñ ÑƒĞ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¿Ğ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ñ‹Ñ… CRM ÑĞ¸ÑÑ‚ĞµĞ¼.

CRM-HUB-SERVICE (Ğ¿Ğ¾Ñ€Ñ‚ 8007):

1. ĞŸĞĞ”Ğ”Ğ•Ğ Ğ–Ğ˜Ğ’ĞĞ•ĞœĞ«Ğ• CRM:

**Ğ Ğ¾ÑÑĞ¸Ğ¹ÑĞºĞ¸Ğµ:**
- amoCRM (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ´Ğ»Ñ Ğ Ğ¤)
- Ğ‘Ğ¸Ñ‚Ñ€Ğ¸ĞºÑ24
- ĞœĞµĞ³Ğ°Ğ¿Ğ»Ğ°Ğ½

**ĞœĞµĞ¶Ğ´ÑƒĞ½Ğ°Ñ€Ğ¾Ğ´Ğ½Ñ‹Ğµ:**
- Salesforce
- HubSpot
- Pipedrive

2. Ğ­ĞĞ”ĞŸĞĞ˜ĞĞ¢Ğ«:

POST   /crm/connect/{crm_type}        # OAuth Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ
GET    /crm/connections               # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğ¹
DELETE /crm/connections/{id}          # ĞÑ‚ĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ CRM
POST   /crm/sync/manual              # Ğ ÑƒÑ‡Ğ½Ğ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
GET    /crm/sync/status              # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½ĞµĞ¹ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
POST   /crm/leads/create             # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ»Ğ¸Ğ´
PUT    /crm/leads/{id}/update        # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ´
GET    /crm/leads/{id}               # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ»Ğ¸Ğ´
POST   /crm/contacts/create          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞºĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚
GET    /crm/webhooks/{crm_type}      # Webhook endpoint

3. ĞĞ‘Ğ¡Ğ¢Ğ ĞĞšĞ¢ĞĞ«Ğ™ Ğ˜ĞĞ¢Ğ•Ğ Ğ¤Ğ•Ğ™Ğ¡:

```python
from abc import ABC, abstractmethod

class BaseCRMAdapter(ABC):
    @abstractmethod
    async def authorize(self, code: str) -> CRMConnection:
        """OAuth authorization"""
        pass
    
    @abstractmethod
    async def create_lead(self, lead_data: LeadData) -> str:
        """Create lead, return external_id"""
        pass
    
    @abstractmethod
    async def update_lead(self, external_id: str, updates: dict) -> bool:
        """Update lead"""
        pass
    
    @abstractmethod
    async def get_lead(self, external_id: str) -> LeadData:
        """Get lead details"""
        pass
    
    @abstractmethod
    async def sync_from_crm(self) -> list[LeadData]:
        """Pull leads from CRM"""
        pass
```

4. AMOCRM ADAPTER:

```python
class AmoCRMAdapter(BaseCRMAdapter):
    def __init__(self, connection: CRMConnection):
        self.subdomain = connection.account_subdomain
        self.access_token = connection.access_token
        self.base_url = f"https://{self.subdomain}.amocrm.ru/api/v4"
    
    async def create_lead(self, lead_data: LeadData) -> str:
        headers = {"Authorization": f"Bearer {self.access_token}"}
        
        payload = {
            "name": lead_data.title,
            "price": lead_data.deal_value,
            "custom_fields_values": [
                {
                    "field_code": "COMPANY_NAME",
                    "values": [{"value": lead_data.company_name}]
                },
                {
                    "field_code": "COMPATIBILITY_SCORE",
                    "values": [{"value": str(lead_data.compatibility_score)}]
                }
            ]
        }
        
        async with httpx.AsyncClient() as client:
            response = await client.post(
                f"{self.base_url}/leads",
                json=[payload],
                headers=headers
            )
            
            response.raise_for_status()
            data = response.json()
            return str(data["_embedded"]["leads"][0]["id"])
    
    async def sync_from_crm(self) -> list[LeadData]:
        # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ»Ğ¸Ğ´Ñ‹ Ğ¸Ğ· amoCRM
        # ĞšĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ² Ğ²Ğ½ÑƒÑ‚Ñ€ĞµĞ½Ğ½Ğ¸Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚
        # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ½Ğ°ÑˆÑƒ Ğ‘Ğ”
        pass
```

5. BITRIX24 ADAPTER:

```python
class Bitrix24Adapter(BaseCRMAdapter):
    def __init__(self, connection: CRMConnection):
        self.webhook_url = f"https://{connection.account_subdomain}.bitrix24.ru/rest/{connection.user_id}/{connection.access_token}"
    
    async def create_lead(self, lead_data: LeadData) -> str:
        payload = {
            "fields": {
                "TITLE": lead_data.title,
                "COMPANY_TITLE": lead_data.company_name,
                "OPPORTUNITY": lead_data.deal_value,
                "UF_CRM_COMPATIBILITY": lead_data.compatibility_score
            }
        }
        
        async with httpx.AsyncClient() as client:
            response = await client.post(
                f"{self.webhook_url}/crm.lead.add",
                json=payload
            )
            
            data = response.json()
            return str(data["result"])
```

6. Ğ¡Ğ˜ĞĞ¥Ğ ĞĞĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯:

**ĞĞ°Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ:**
- TO_CRM: ĞŸĞ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²Ğ° Ğ¸Ğ· Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ â†’ Ğ›Ğ¸Ğ´Ñ‹ Ğ² CRM
- FROM_CRM: ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ»Ğ¸Ğ´Ğ¾Ğ² Ğ² CRM â†’ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²

**Ğ¡Ñ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ğ¸ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ²:**
```python
class ConflictResolutionStrategy(Enum):
    CRM_WINS = "crm_wins"           # CRM Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½ĞµĞµ
    PLATFORM_WINS = "platform_wins" # ĞŸĞ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚Ğ½ĞµĞµ
    LAST_MODIFIED_WINS = "last_modified"  # ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ
    MANUAL_REVIEW = "manual"        # Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ
```

7. WEBHOOKS:

```python
@router.post("/crm/webhooks/amocrm")
async def amocrm_webhook(request: Request):
    payload = await request.json()
    
    event_type = payload.get("leads[status][0][status_id]")
    lead_id = payload.get("leads[status][0][id]")
    
    if event_type == "142":  # Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ "Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾"
        # ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²Ğ¾ Ğ² Ğ½Ğ°ÑˆĞµĞ¹ Ğ‘Ğ”
        await update_partnership_status(
            crm_type="amocrm",
            external_id=lead_id,
            status="active"
        )
    
    return {"status": "ok"}
```

8. ĞœĞĞŸĞŸĞ˜ĞĞ“ ĞŸĞĞ›Ğ•Ğ™:

```python
FIELD_MAPPINGS = {
    "amocrm": {
        "company_name": "COMPANY_NAME",
        "contact_person": "NAME",
        "compatibility_score": "COMPATIBILITY_SCORE",
        "deal_value": "price",
    },
    "bitrix24": {
        "company_name": "COMPANY_TITLE",
        "contact_person": "NAME",
        "compatibility_score": "UF_CRM_COMPATIBILITY",
        "deal_value": "OPPORTUNITY",
    },
}
```

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- OAuth 2.0 Ğ´Ğ»Ñ Ğ²ÑĞµÑ… CRM
- Refresh token Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
- Webhook Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
- Batch ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ (ĞºĞ°Ğ¶Ğ´Ñ‹Ğµ 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚)
- Conflict resolution
- Audit log Ğ²ÑĞµÑ… Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹
- Retry Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ CRM Hub ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ°Ğ´Ğ°Ğ¿Ñ‚ĞµÑ€Ğ°Ğ¼Ğ¸.
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–8: Frontend

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¹ Next.js 15 Ñ„Ñ€Ğ¾Ğ½Ñ‚ĞµĞ½Ğ´.

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹ Next.js 15 frontend Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ALGORITHMIC ARTS.

Ğ¢Ğ•Ğ¥ĞĞĞ›ĞĞ“Ğ˜Ğ˜:
- Next.js 15 (App Router)
- React 19
- TypeScript 5.4
- Tailwind CSS 3.4
- shadcn/ui
- TanStack Query
- Zustand (state management)

Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ:
```
frontend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ (auth)/
â”‚   â”‚   â”œâ”€â”€ login/page.tsx
â”‚   â”‚   â”œâ”€â”€ register/page.tsx
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”œâ”€â”€ (dashboard)/
â”‚   â”‚   â”œâ”€â”€ companies/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¹
â”‚   â”‚   â”‚   â”œâ”€â”€ [id]/page.tsx         # Ğ”ĞµÑ‚Ğ°Ğ»Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”‚   â”‚   â””â”€â”€ new/page.tsx          # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”‚   â”‚   â”œâ”€â”€ partnerships/
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²
â”‚   â”‚   â”‚   â”œâ”€â”€ recommendations/page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ [id]/page.tsx
â”‚   â”‚   â”œâ”€â”€ analytics/page.tsx
â”‚   â”‚   â”œâ”€â”€ settings/page.tsx
â”‚   â”‚   â””â”€â”€ layout.tsx
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ auth/[...nextauth]/route.ts
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx                      # Landing page
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                           # shadcn/ui components
â”‚   â”œâ”€â”€ companies/
â”‚   â”‚   â”œâ”€â”€ CompanyCard.tsx
â”‚   â”‚   â”œâ”€â”€ CompanyFilters.tsx
â”‚   â”‚   â””â”€â”€ CompanySearch.tsx
â”‚   â”œâ”€â”€ partnerships/
â”‚   â”‚   â”œâ”€â”€ PartnershipCard.tsx
â”‚   â”‚   â”œâ”€â”€ CompatibilityScore.tsx
â”‚   â”‚   â””â”€â”€ OutreachDialog.tsx
â”‚   â””â”€â”€ layout/
â”‚       â”œâ”€â”€ Header.tsx
â”‚       â”œâ”€â”€ Sidebar.tsx
â”‚       â””â”€â”€ Footer.tsx
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ client.ts             # Axios instance
â”‚   â”‚   â”œâ”€â”€ companies.ts
â”‚   â”‚   â”œâ”€â”€ partnerships.ts
â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”œâ”€â”€ useCompanies.ts
â”‚   â”‚   â”œâ”€â”€ usePartnerships.ts
â”‚   â”‚   â””â”€â”€ useAuth.ts
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â”œâ”€â”€ authStore.ts
â”‚   â”‚   â””â”€â”€ filterStore.ts
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ cn.ts
â”‚       â””â”€â”€ formatters.ts
â”œâ”€â”€ styles/
â”‚   â””â”€â”€ globals.css
â””â”€â”€ types/
    â”œâ”€â”€ company.ts
    â”œâ”€â”€ partnership.ts
    â””â”€â”€ user.ts
```

ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ• ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ«:

1. COMPANY CARD:
```tsx
'use client';

import { Card, CardContent, CardHeader } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { Button } from "@/components/ui/button";
import { Company } from "@/types/company";

export function CompanyCard({ company }: { company: Company }) {
  return (
    <Card className="hover:shadow-lg transition-shadow">
      <CardHeader>
        <div className="flex items-start justify-between">
          <div className="flex gap-4">
            <img 
              src={company.logo_url} 
              alt={company.name}
              className="w-16 h-16 rounded-lg"
            />
            <div>
              <h3 className="text-xl font-semibold">{company.name}</h3>
              <p className="text-sm text-muted-foreground">
                {company.industry} â€¢ {company.headquarters_city}
              </p>
            </div>
          </div>
          <Badge variant="secondary">{company.employees_range}</Badge>
        </div>
      </CardHeader>
      <CardContent>
        <p className="text-sm mb-4 line-clamp-2">{company.description}</p>
        <div className="flex flex-wrap gap-2 mb-4">
          {company.tech_stack?.slice(0, 5).map(tech => (
            <Badge key={tech} variant="outline">{tech}</Badge>
          ))}
        </div>
        <div className="flex gap-2">
          <Button variant="default" className="flex-1">
            ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞµ
          </Button>
          <Button variant="outline" className="flex-1">
            ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ¾Ğ²
          </Button>
        </div>
      </CardContent>
    </Card>
  );
}
```

2. COMPATIBILITY SCORE:
```tsx
'use client';

import { Progress } from "@/components/ui/progress";
import { Badge } from "@/components/ui/badge";

export function CompatibilityScore({ score }: { score: number }) {
  const getColor = (score: number) => {
    if (score >= 0.8) return "bg-green-500";
    if (score >= 0.6) return "bg-yellow-500";
    return "bg-red-500";
  };
  
  const getLabel = (score: number) => {
    if (score >= 0.8) return "ĞÑ‚Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ";
    if (score >= 0.6) return "Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ°Ñ";
    return "ĞĞ¸Ğ·ĞºĞ°Ñ";
  };

  return (
    <div className="space-y-2">
      <div className="flex items-center justify-between">
        <span className="text-sm font-medium">Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ</span>
        <Badge className={getColor(score)}>
          {getLabel(score)} ({Math.round(score * 100)}%)
        </Badge>
      </div>
      <Progress value={score * 100} className={getColor(score)} />
    </div>
  );
}
```

3. REAL-TIME UPDATES (WebSocket):
```tsx
'use client';

import { useEffect } from 'react';
import { useQueryClient } from '@tanstack/react-query';

export function useRealtimeUpdates() {
  const queryClient = useQueryClient();

  useEffect(() => {
    const ws = new WebSocket('ws://localhost:8080/ws');

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);

      switch (data.type) {
        case 'company.created':
          queryClient.invalidateQueries({ queryKey: ['companies'] });
          break;
        case 'partnership.matched':
          queryClient.invalidateQueries({ queryKey: ['partnerships'] });
          // Show toast notification
          toast.success('ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€ÑÑ‚Ğ²Ğ¾!');
          break;
      }
    };

    return () => ws.close();
  }, [queryClient]);
}
```

4. DATA FETCHING (Server Components):
```tsx
// app/(dashboard)/companies/page.tsx
import { CompanyCard } from '@/components/companies/CompanyCard';
import { getCompanies } from '@/lib/api/companies';

export default async function CompaniesPage({
  searchParams,
}: {
  searchParams: { industry?: string; page?: string };
}) {
  const companies = await getCompanies({
    industry: searchParams.industry,
    page: Number(searchParams.page) || 1,
  });

  return (
    <div className="container mx-auto py-8">
      <h1 className="text-3xl font-bold mb-8">ĞšĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸</h1>
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {companies.map(company => (
          <CompanyCard key={company.id} company={company} />
        ))}
      </div>
    </div>
  );
}
```

5. AUTHENTICATION (NextAuth):
```ts
// app/api/auth/[...nextauth]/route.ts
import NextAuth from 'next-auth';
import CredentialsProvider from 'next-auth/providers/credentials';

export const authOptions = {
  providers: [
    CredentialsProvider({
      credentials: {
        email: { type: "email" },
        password: { type: "password" }
      },
      async authorize(credentials) {
        const res = await fetch('http://localhost:8001/auth/login', {
          method: 'POST',
          body: JSON.stringify(credentials),
          headers: { "Content-Type": "application/json" }
        });
        
        const user = await res.json();
        
        if (res.ok && user) {
          return user;
        }
        return null;
      }
    })
  ],
  session: {
    strategy: 'jwt',
  },
  pages: {
    signIn: '/login',
  },
};

const handler = NextAuth(authOptions);
export { handler as GET, handler as POST };
```

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- Server Components Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
- Client Components Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ³Ğ´Ğµ Ğ½ÑƒĞ¶Ğ½Ğ° Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾ÑÑ‚ÑŒ
- Streaming Ñ Suspense
- Progressive enhancement
- Responsive design (mobile-first)
- Dark mode Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°
- Accessibility (ARIA)
- SEO optimization

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ Next.js Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸.
```

---

## ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–9: DevOps

### Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¹ DevOps: CI/CD, Kubernetes, Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³.

### ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚

```markdown
Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ DevOps Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ´Ğ»Ñ Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹ ALGORITHMIC ARTS Ğ² Yandex Cloud.

ĞšĞĞœĞŸĞĞĞ•ĞĞ¢Ğ«:

1. KUBERNETES MANIFESTS:

**Deployment Ğ´Ğ»Ñ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑĞ°:**
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: company-service
  namespace: production
spec:
  replicas: 3
  selector:
    matchLabels:
      app: company-service
  template:
    metadata:
      labels:
        app: company-service
    spec:
      containers:
      - name: company-service
        image: cr.yandex/algorithmic-arts/company-service:latest
        ports:
        - containerPort: 8003
        env:
        - name: DATABASE_URL
          valueFrom:
            secretKeyRef:
              name: db-credentials
              key: url
        resources:
          requests:
            memory: "256Mi"
            cpu: "200m"
          limits:
            memory: "512Mi"
            cpu: "500m"
        livenessProbe:
          httpGet:
            path: /health
            port: 8003
          initialDelaySeconds: 30
          periodSeconds: 10
        readinessProbe:
          httpGet:
            path: /health
            port: 8003
          initialDelaySeconds: 10
          periodSeconds: 5
```

**HPA (Horizontal Pod Autoscaler):**
```yaml
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: company-service-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: company-service
  minReplicas: 3
  maxReplicas: 20
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

2. GITHUB ACTIONS CI/CD:

**.github/workflows/ci.yml:**
```yaml
name: CI

on:
  pull_request:
    branches: [main, develop]
  push:
    branches: [main, develop]

jobs:
  test:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:17
        env:
          POSTGRES_PASSWORD: postgres
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5

    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.12'
    
    - name: Install Poetry
      run: |
        curl -sSL https://install.python-poetry.org | python3 -
        echo "$HOME/.local/bin" >> $GITHUB_PATH
    
    - name: Install dependencies
      working-directory: services/company-service
      run: poetry install
    
    - name: Run linters
      working-directory: services/company-service
      run: |
        poetry run ruff check .
        poetry run mypy src/
    
    - name: Run tests
      working-directory: services/company-service
      run: |
        poetry run pytest --cov=src --cov-report=xml
    
    - name: Upload coverage
      uses: codecov/codecov-action@v4
      with:
        file: ./coverage.xml
```

**.github/workflows/cd.yml:**
```yaml
name: CD

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Login to Yandex Container Registry
      run: |
        echo ${{ secrets.YC_SA_KEY }} | docker login \
          --username json_key \
          --password-stdin \
          cr.yandex
    
    - name: Build and push Docker images
      run: |
        services=(
          "api-gateway"
          "company-service"
          "auth-service"
          "ai-core-service"
        )
        
        for service in "${services[@]}"; do
          docker build -t cr.yandex/algorithmic-arts/$service:${{ github.sha }} \
            ./services/$service
          docker push cr.yandex/algorithmic-arts/$service:${{ github.sha }}
          
          # Tag as latest
          docker tag cr.yandex/algorithmic-arts/$service:${{ github.sha }} \
            cr.yandex/algorithmic-arts/$service:latest
          docker push cr.yandex/algorithmic-arts/$service:latest
        done
    
    - name: Deploy to Kubernetes
      run: |
        yc managed-kubernetes cluster \
          get-credentials algorithmic-arts-cluster \
          --external
        
        kubectl set image deployment/company-service \
          company-service=cr.yandex/algorithmic-arts/company-service:${{ github.sha }} \
          -n production
        
        kubectl rollout status deployment/company-service -n production
```

3. TERRAFORM (Yandex Cloud):

```hcl
# main.tf
terraform {
  required_providers {
    yandex = {
      source = "yandex-cloud/yandex"
    }
  }
}

provider "yandex" {
  zone = "ru-central1-a"
}

# Kubernetes Cluster
resource "yandex_kubernetes_cluster" "algorithmic_arts" {
  name        = "algorithmic-arts-cluster"
  network_id  = yandex_vpc_network.main.id

  master {
    version = "1.28"
    zonal {
      zone      = "ru-central1-a"
      subnet_id = yandex_vpc_subnet.main.id
    }
    public_ip = true
  }

  service_account_id      = yandex_iam_service_account.k8s_sa.id
  node_service_account_id = yandex_iam_service_account.k8s_nodes_sa.id
}

# PostgreSQL Cluster
resource "yandex_mdb_postgresql_cluster" "main" {
  name        = "algorithmic-arts-db"
  environment = "PRODUCTION"
  network_id  = yandex_vpc_network.main.id

  config {
    version = "17"
    resources {
      resource_preset_id = "s2.medium"
      disk_type_id       = "network-ssd"
      disk_size          = 500
    }
  }

  host {
    zone      = "ru-central1-a"
    subnet_id = yandex_vpc_subnet.main.id
  }
  
  host {
    zone      = "ru-central1-b"
    subnet_id = yandex_vpc_subnet.replica.id
    replication_source_name = "algorithmic-arts-db-host-1"
  }
}
```

4. PROMETHEUS + GRAFANA:

**prometheus.yml:**
```yaml
global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  - job_name: 'kubernetes-pods'
    kubernetes_sd_configs:
    - role: pod
    relabel_configs:
    - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_scrape]
      action: keep
      regex: true
    - source_labels: [__meta_kubernetes_pod_annotation_prometheus_io_path]
      action: replace
      target_label: __metrics_path__
      regex: (.+)
```

**Grafana Dashboard (JSON):**
- Request latency (p50, p95, p99)
- Error rate (4xx, 5xx)
- Request throughput (req/sec)
- Active connections
- Database query time
- Cache hit rate

5. ALERTING (AlertManager):

```yaml
route:
  group_by: ['alertname', 'cluster', 'service']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 12h
  receiver: 'telegram'

receivers:
  - name: 'telegram'
    telegram_configs:
      - bot_token: $TELEGRAM_BOT_TOKEN
        chat_id: $TELEGRAM_CHAT_ID
        parse_mode: 'HTML'

inhibit_rules:
  - source_match:
      severity: 'critical'
    target_match:
      severity: 'warning'
    equal: ['alertname', 'cluster', 'service']
```

**Alert Rules:**
```yaml
groups:
  - name: services
    rules:
    - alert: HighErrorRate
      expr: rate(http_requests_total{status=~"5.."}[5m]) > 0.05
      for: 5m
      labels:
        severity: critical
      annotations:
        summary: "High error rate on {{ $labels.service }}"
        description: "Error rate is {{ $value | humanizePercentage }}"
    
    - alert: SlowResponse
      expr: histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m])) > 1
      for: 10m
      labels:
        severity: warning
      annotations:
        summary: "Slow response time on {{ $labels.service }}"
```

Ğ¢Ğ Ğ•Ğ‘ĞĞ’ĞĞĞ˜Ğ¯:
- Multi-stage Docker builds
- K8s secrets Ğ´Ğ»Ñ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
- Network policies Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¾Ğ»ÑÑ†Ğ¸Ğ¸
- Resource quotas Ğ¿Ğ¾ namespace
- Backup ÑÑ‚Ñ€Ğ°Ñ‚ĞµĞ³Ğ¸Ñ (Velero)
- Disaster recovery plan
- Blue-green deployments

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹ Ğ¿Ğ¾Ğ»Ğ½ÑƒÑ DevOps Ğ¸Ğ½Ñ„Ñ€Ğ°ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼.
```

---

## ğŸ“ ĞšĞ°Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹

### ĞŸĞ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

1. **ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–1** â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñƒ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°, Docker Compose
2. **ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–2** â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ ÑÑ…ĞµĞ¼Ñ‹ Ğ‘Ğ” Ğ¸ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ğ¸
3. **ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹ â„–3-7** â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ¼Ğ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹ (Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾)
4. **ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–8** â†’ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ frontend
5. **ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚ â„–9** â†’ ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ DevOps

### Ğ¡Ğ¾Ğ²ĞµÑ‚Ñ‹ Ğ¿Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ñ AI

1. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ¿Ğ¾ Ğ¾Ğ´Ğ½Ğ¾Ğ¼Ñƒ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñƒ Ğ·Ğ° Ñ€Ğ°Ğ·**
2. **ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞ¹Ñ‚Ğµ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´** Ğ¿ĞµÑ€ĞµĞ´ ÑĞ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼
3. **ĞĞ´Ğ°Ğ¿Ñ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹** Ğ¿Ğ¾Ğ´ ÑĞ²Ğ¾Ğ¸ Ğ½ÑƒĞ¶Ğ´Ñ‹
4. **Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ¹Ñ‚Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚** Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… ÑˆĞ°Ğ³Ğ¾Ğ²

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ°

ĞŸĞ¾ÑĞ»Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°:
```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹
ls -la services/company-service/

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¸Ğ½Ñ‚Ğ°ĞºÑĞ¸ÑĞ°
poetry run ruff check .

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²
poetry run pytest

# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Docker
docker build -t company-service .
```

---

**ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ:** Ğ¤ĞµĞ²Ñ€Ğ°Ğ»ÑŒ 2026  
**Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.0
